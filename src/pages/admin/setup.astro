---
import AdminSetup from "@/components/admin/admin-setup";
import SiteLayout from "@/layout/site-layout.astro";
import { adminTokenCheck } from "@/lib/auth/helpers";

export const prerender = false;

const token = Astro.url.searchParams.get("token");

if (!adminTokenCheck(token)) {
  return Astro.redirect("/auth/sign-in");
}
---

<SiteLayout title="Crear cuenta admin">
  <AdminSetup client:load token={token} />
</SiteLayout>
